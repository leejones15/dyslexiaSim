<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Story</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            line-height: 1.6;
            background-color: #f9f9f9;
        }
        h1 {
            text-align: center;
            font-size: 2em;
            color: #333;
        }
        p {
            font-size: 1.2em;
            color: #444;
            margin-bottom: 20px;
        }
        .bold {
            font-weight: bold;
        }
    </style>
</head>
<body>

    <h1>The Lost Kitten</h1>

    <div id="story">
        <!-- Section for Student 1 -->
        <p id="s1">
            <span>Mia loved animals. She had a dog named Max and a fish named Bubbles. One rainy afternoon, Mia heard a soft "meow" outside her window. She looked out and saw a tiny, wet kitten hiding under a bush.</span>
        </p>
        <p id="s1">
            <span>"Oh no! You must be cold and scared," Mia said. She ran outside with an umbrella. Carefully, she picked up the shivering kitten and carried it inside. She wrapped it in a warm towel and gave it a little bowl of milk.</span>
        </p>

        <!-- Section for Student 2 -->
        <p id="s2">
            <span>Mia’s mom helped her dry the kitten’s fur. "We should see if someone lost their pet," her mom said. They made posters with a picture of the kitten and put them around the neighborhood.</span>
        </p>
        <p id="s2">
            <span>A day later, Mia got a call. "That’s my kitten, Whiskers!" a boy named Jake said. He had been looking everywhere. Mia felt a little sad to say goodbye, but she knew the kitten belonged with Jake.</span>
        </p>

        <!-- Section for Student 3 -->
        <p id="s3">
            <span>When Jake came to get Whiskers, he smiled. "Thank you for taking care of her!" he said. Mia smiled too. She was happy Whiskers was safe.</span>
        </p>
        <p id="s3">
            <span>That night, as she cuddled with Max, Mia thought about how good it felt to help someone.</span>
        </p>
    </div>

    <script>
        let studentNumber = localStorage.getItem("studentNumber");

        function applyBoldText() {
            // Bold the correct section based on student number
            if (studentNumber === "1") {
                document.querySelectorAll("#s1 span").forEach(el => el.classList.add("bold"));
            } else if (studentNumber === "2") {
                document.querySelectorAll("#s2 span").forEach(el => el.classList.add("bold"));
            } else if (studentNumber === "3") {
                document.querySelectorAll("#s3 span").forEach(el => el.classList.add("bold"));
            }
        }

        // Scrambling function for Student 3
        function scrambleWord(word) {
            if (word.length < 2) return word;
            let letters = word.match(/[a-zA-Z]/g);
            if (!letters) return word;

            for (let i = letters.length - 1; i > 0; i--) {
                let j = Math.floor(Math.random() * (i + 1));
                [letters[i], letters[j]] = [letters[j], letters[i]]; // Swap letters randomly
            }

            let scrambledWord = "";
            let letterIndex = 0;

            for (let char of word) {
                if (/[a-zA-Z]/.test(char)) {
                    scrambledWord += letters[letterIndex++];
                } else {
                    scrambledWord += char;
                }
            }

            return scrambledWord;
        }

        function scrambleText() {
            if (studentNumber !== "3") return; // Only scramble for Student 3

            let elements = document.querySelectorAll("#story p");
            elements.forEach(element => {
                let words = element.innerText.split(" ");
                let scrambledWords = words.map(word => scrambleWord(word));
                element.innerHTML = scrambledWords.join(" ");
            });
        }

        // Apply bold formatting and scramble text (if Student 3)
        applyBoldText();
        if (studentNumber === "3") {
            setInterval(scrambleText, 1000); // Continuously shuffle text every second
        }
    </script>

</body>
</html>
